# 20251019_05_npm-yarn-support-plan

**ä½œæˆæ—¥**: 2025-10-19  
**ã‚¿ã‚¤ãƒˆãƒ«**: npm/yarn ã‚µãƒãƒ¼ãƒˆå®Ÿè£…è¨ˆç”»  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: IN-PROGRESS

---

## ğŸ“‹ è¦ä»¶ç¢ºèª

### ç¾åœ¨ã®çŠ¶æ³
- **å®Ÿè¡Œç’°å¢ƒ**: Bunå°‚ç”¨
- **package.json**: `"module": "index.ts"` ã§ Bun è¨­å®š
- **ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ**: `index.ts` â†’ `src/main.ts`
- **ãƒ“ãƒ«ãƒ‰**: Bun ã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ä½¿ç”¨

### ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦ä»¶
1. **Bun ä¸è¦**: npm/yarn ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½
2. **ãƒ“ãƒ«ãƒ‰ä¸è¦**: TypeScript ã‚’ãã®ã¾ã¾å®Ÿè¡Œ
3. **ç›´æ¥å®Ÿè¡Œ**: `npm run start` ã¾ãŸã¯ `yarn start` ã§å‹•ä½œ
4. **ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ç½®**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã‚’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã”ã¨é…ç½®ã—ã¦å®Ÿè¡Œ

---

## ğŸ¯ å®Ÿè£…æ–¹é‡

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ 1: tsx/ts-node ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰
**ãƒ¡ãƒªãƒƒãƒˆ**:
- TypeScript ã‚’ãã®ã¾ã¾å®Ÿè¡Œ
- ãƒ“ãƒ«ãƒ‰ä¸è¦
- npm/yarn ã§ç°¡å˜ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å¯èƒ½

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- Node.js ãŒå¿…è¦
- å®Ÿè¡Œé€Ÿåº¦ã¯ Bun ã‚ˆã‚Šé…ã„

**å®Ÿè£…æ–¹æ³•**:
```bash
npm install --save-dev tsx
# ã¾ãŸã¯
npm install --save-dev ts-node
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ 2: Node.js äº’æ›è¨­å®š
**ãƒ¡ãƒªãƒƒãƒˆ**:
- æ¨™æº–çš„ãª Node.js/npm æ§‹æˆ
- å¤šãã® CI/CD ã‚µãƒ¼ãƒ“ã‚¹ã§å‹•ä½œ

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- å®Ÿè¡Œé€Ÿåº¦ãŒé…ã„å¯èƒ½æ€§
- Node.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 18+ å¿…é ˆ

---

## ğŸ”§ å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

### Step 1: package.json æ›´æ–°
```json
{
  "type": "module",
  "engines": {
    "node": ">=18.0.0",
    "npm": ">=9.0.0",
    "yarn": ">=3.0.0"
  },
  "scripts": {
    "start": "tsx src/main.ts",
    "dev": "tsx --watch src/main.ts",
    "test": "tsx node_modules/bun/bin/bun.js test"
  },
  "devDependencies": {
    "tsx": "^4.7.0",
    "typescript": "^5.3.0"
  }
}
```

### Step 2: index.ts å‰Šé™¤ã¾ãŸã¯æ›´æ–°
**ç¾åœ¨**: `index.ts` ã¯ Bun ç”¨ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ

**é¸æŠè‚¢**:
- A: `index.ts` ã‚’å‰Šé™¤ã€`src/main.ts` ã‚’ç›´æ¥å®Ÿè¡Œ
- B: `index.ts` ã‚’ Node.js ç”¨ã«ãƒªãƒ¡ã‚¤ã‚¯

**æ¨å¥¨**: A - `index.ts` ã¯ Bun å°‚ç”¨ã¨ã—ã¦ä¿æŒã€npm ã¯ç›´æ¥ `src/main.ts` ã‚’å®Ÿè¡Œ

### Step 3: å®Ÿè¡Œæ–¹æ³•ã®çµ±ä¸€
```bash
# Bun ä½¿ç”¨æ™‚
bun run src/main.ts

# npm ä½¿ç”¨æ™‚
npm run start  # â†’ tsx src/main.ts

# yarn ä½¿ç”¨æ™‚
yarn start     # â†’ tsx src/main.ts
```

### Step 4: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- README.md ã« npm/yarn ä½¿ç”¨æ–¹æ³•ã‚’è¿½è¨˜
- ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã‚’æ•´ç†

---

## ğŸ“ å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] package.json ã« `tsx` ã‚’ devDependency ã«è¿½åŠ 
- [ ] `"scripts"` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°
- [ ] `"engines"` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ï¼ˆNode.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šï¼‰
- [ ] README.md ã‚’æ›´æ–°
- [ ] npm/yarn ã§ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ç¢ºèª
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå®Œå‚™

---

## ğŸš€ å®Ÿè£…äºˆå®š

1. **å³åº§**: package.json æ›´æ–°ã€tsx è¿½åŠ 
2. **åŒæ—¥**: README.md æ›´æ–°ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
3. **æ¬¡ãƒ•ã‚§ãƒ¼ã‚º**: Node.js/npm ã‚µãƒãƒ¼ãƒˆå®Œå…¨åŒ–

---

## ğŸ’¡ è£œè¶³

### ä»–ã®é¸æŠè‚¢

**ts-node**:
- å®Ÿç¸¾ãŒè±Šå¯Œ
- tsx ã‚ˆã‚Šè¨­å®šãŒè¤‡é›‘ãªå ´åˆãŒã‚ã‚‹
- éæ¨å¥¨å‚¾å‘ï¼ˆtsx ã®æ–¹ãŒãƒ¢ãƒ€ãƒ³ï¼‰

**node --loader**:
- tsx/ts-node ä¸è¦
- Node.js æ¨™æº–æ©Ÿèƒ½ã®ã¿
- ESM ã‚µãƒãƒ¼ãƒˆå¿…è¦ï¼ˆNode.js 18+ï¼‰

**Vite**:
- é–‹ç™ºã‚µãƒ¼ãƒãƒ¼æ©Ÿèƒ½
- æœ¬ãƒ„ãƒ¼ãƒ«ã§ã¯ä¸è¦

---

**é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- `docs/02_requirements/features/upstream-merge-tool-requirements.md`
- `docs/03_design/architecture/upstream-merge-tool-architecture.md`

**æ¬¡ã®ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³**: npm/yarn ã‚µãƒãƒ¼ãƒˆå®Ÿè£…ï¼ˆ2025-10-19ï¼‰
